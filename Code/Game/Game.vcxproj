<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <ItemGroup Label="ProjectConfigurations">
        <ProjectConfiguration Include="Debug|Win32">
            <Configuration>Debug</Configuration>
            <Platform>Win32</Platform>
        </ProjectConfiguration>
        <ProjectConfiguration Include="Release|Win32">
            <Configuration>Release</Configuration>
            <Platform>Win32</Platform>
        </ProjectConfiguration>
        <ProjectConfiguration Include="Debug|x64">
            <Configuration>Debug</Configuration>
            <Platform>x64</Platform>
        </ProjectConfiguration>
        <ProjectConfiguration Include="Release|x64">
            <Configuration>Release</Configuration>
            <Platform>x64</Platform>
        </ProjectConfiguration>
    </ItemGroup>
    <PropertyGroup Label="Globals">
        <VCProjectVersion>17.0</VCProjectVersion>
        <Keyword>Win32Proj</Keyword>
        <ProjectGuid>{1c6046c0-acfa-4ab7-b8d2-670ad463b3ef}</ProjectGuid>
        <RootNamespace>Game</RootNamespace>
        <WindowsTargetPlatformVersion>10.0</WindowsTargetPlatformVersion>
        <ProjectName>DaemonCraft</ProjectName>
    </PropertyGroup>

    <Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props"/>

    <!-- V8 Package Imports - Using Relative Paths -->
    <Import Project="..\..\..\Engine\Code\ThirdParty\packages\v8-v143-x64.13.0.245.25\build\native\v8-v143-x64.props"/>
    <Import Project="..\..\..\Engine\Code\ThirdParty\packages\v8.redist-v143-x64.13.0.245.25\build\native\v8.redist-v143-x64.props"/>

    <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="Configuration">
        <ConfigurationType>Application</ConfigurationType>
        <UseDebugLibraries>true</UseDebugLibraries>
        <PlatformToolset>v143</PlatformToolset>
        <CharacterSet>Unicode</CharacterSet>
    </PropertyGroup>
    <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="Configuration">
        <ConfigurationType>Application</ConfigurationType>
        <UseDebugLibraries>false</UseDebugLibraries>
        <PlatformToolset>v143</PlatformToolset>
        <WholeProgramOptimization>true</WholeProgramOptimization>
        <CharacterSet>Unicode</CharacterSet>
    </PropertyGroup>
    <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'" Label="Configuration">
        <ConfigurationType>Application</ConfigurationType>
        <UseDebugLibraries>true</UseDebugLibraries>
        <PlatformToolset>v143</PlatformToolset>
        <CharacterSet>Unicode</CharacterSet>
    </PropertyGroup>
    <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|x64'" Label="Configuration">
        <ConfigurationType>Application</ConfigurationType>
        <UseDebugLibraries>false</UseDebugLibraries>
        <PlatformToolset>v143</PlatformToolset>
        <WholeProgramOptimization>true</WholeProgramOptimization>
        <CharacterSet>Unicode</CharacterSet>
    </PropertyGroup>

    <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props"/>

    <ImportGroup Label="ExtensionSettings">
    </ImportGroup>
    <ImportGroup Label="Shared">
    </ImportGroup>
    <ImportGroup Label="PropertySheets" Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
        <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform"/>
    </ImportGroup>
    <ImportGroup Label="PropertySheets" Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
        <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform"/>
    </ImportGroup>
    <ImportGroup Label="PropertySheets" Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
        <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform"/>
    </ImportGroup>
    <ImportGroup Label="PropertySheets" Condition="'$(Configuration)|$(Platform)'=='Release|x64'">
        <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform"/>
    </ImportGroup>

    <PropertyGroup Label="UserMacros"/>

    <!-- Output directly to Temporary folder - PostBuildEvent will copy executable to Run -->
    <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
        <OutDir>$(SolutionDir)Temporary\$(ProjectName)_$(PlatformShortName)_$(Configuration)\</OutDir>
        <IntDir>$(SolutionDir)Temporary\$(ProjectName)_$(PlatformShortName)_$(Configuration)\</IntDir>
        <TargetName>$(ProjectName)_$(Configuration)_$(PlatformShortName)</TargetName>
        <LocalDebuggerCommand>$(TargetFileName)</LocalDebuggerCommand>
        <LocalDebuggerWorkingDirectory>$(SolutionDir)Run\</LocalDebuggerWorkingDirectory>
        <DebuggerFlavor>WindowsLocalDebugger</DebuggerFlavor>
    </PropertyGroup>
    <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
        <OutDir>$(SolutionDir)Temporary\$(ProjectName)_$(PlatformShortName)_$(Configuration)\</OutDir>
        <IntDir>$(SolutionDir)Temporary\$(ProjectName)_$(PlatformShortName)_$(Configuration)\</IntDir>
        <TargetName>$(ProjectName)_$(Configuration)_$(PlatformShortName)</TargetName>
        <LocalDebuggerCommand>$(TargetFileName)</LocalDebuggerCommand>
        <LocalDebuggerWorkingDirectory>$(SolutionDir)Run\</LocalDebuggerWorkingDirectory>
        <DebuggerFlavor>WindowsLocalDebugger</DebuggerFlavor>
    </PropertyGroup>
    <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
        <OutDir>$(SolutionDir)Temporary\$(ProjectName)_$(PlatformShortName)_$(Configuration)\</OutDir>
        <IntDir>$(SolutionDir)Temporary\$(ProjectName)_$(PlatformShortName)_$(Configuration)\</IntDir>
        <TargetName>$(ProjectName)_$(Configuration)_$(PlatformShortName)</TargetName>
        <LocalDebuggerCommand>$(TargetFileName)</LocalDebuggerCommand>
        <LocalDebuggerWorkingDirectory>$(SolutionDir)Run\</LocalDebuggerWorkingDirectory>
        <DebuggerFlavor>WindowsLocalDebugger</DebuggerFlavor>
    </PropertyGroup>
    <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|x64'">
        <OutDir>$(SolutionDir)Temporary\$(ProjectName)_$(PlatformShortName)_$(Configuration)\</OutDir>
        <IntDir>$(SolutionDir)Temporary\$(ProjectName)_$(PlatformShortName)_$(Configuration)\</IntDir>
        <TargetName>$(ProjectName)_$(Configuration)_$(PlatformShortName)</TargetName>
        <LocalDebuggerCommand>$(TargetFileName)</LocalDebuggerCommand>
        <LocalDebuggerWorkingDirectory>$(SolutionDir)Run\</LocalDebuggerWorkingDirectory>
        <DebuggerFlavor>WindowsLocalDebugger</DebuggerFlavor>
    </PropertyGroup>

    <!-- Simplified ItemDefinitionGroups - V8 props files handle the V8 dependencies -->
    <!-- Debug Win32 Configuration -->
    <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
        <ClCompile>
            <WarningLevel>Level4</WarningLevel>
            <SDLCheck>true</SDLCheck>
            <PreprocessorDefinitions>_DEBUG;_CONSOLE;%(PreprocessorDefinitions)</PreprocessorDefinitions>
            <ConformanceMode>true</ConformanceMode>
            <LanguageStandard>stdcpp20</LanguageStandard>
            <AdditionalOptions>/Zc:__cplusplus /std:c++20</AdditionalOptions>
            <AdditionalIncludeDirectories>$(SolutionDir)Code/;$(SolutionDir)../Engine/Code/</AdditionalIncludeDirectories>
        </ClCompile>
        <Link>
            <SubSystem>Windows</SubSystem>
            <GenerateDebugInformation>true</GenerateDebugInformation>
            <AdditionalLibraryDirectories>$(SolutionDir)Code/;$(SolutionDir)../Engine/Code/</AdditionalLibraryDirectories>
            <!-- Additional V8 dependencies not covered by props -->
            <AdditionalDependencies>winmm.lib;%(AdditionalDependencies)</AdditionalDependencies>
        </Link>
        <PostBuildEvent>
            <Command>xcopy /Y /F /I "$(TargetPath)" "$(SolutionDir)Run"</Command>
            <Message>Copying $(TargetFileName) to $(SolutionDir)Run...</Message>
        </PostBuildEvent>
    </ItemDefinitionGroup>

    <!-- Release Win32 Configuration -->
    <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
        <ClCompile>
            <WarningLevel>Level4</WarningLevel>
            <FunctionLevelLinking>true</FunctionLevelLinking>
            <IntrinsicFunctions>true</IntrinsicFunctions>
            <SDLCheck>true</SDLCheck>
            <PreprocessorDefinitions>NDEBUG;_CONSOLE;%(PreprocessorDefinitions)</PreprocessorDefinitions>
            <ConformanceMode>true</ConformanceMode>
            <LanguageStandard>stdcpp20</LanguageStandard>
            <AdditionalOptions>/Zc:__cplusplus /std:c++20</AdditionalOptions>
            <AdditionalIncludeDirectories>$(SolutionDir)Code/;$(SolutionDir)../Engine/Code/</AdditionalIncludeDirectories>
        </ClCompile>
        <Link>
            <SubSystem>Windows</SubSystem>
            <EnableCOMDATFolding>true</EnableCOMDATFolding>
            <OptimizeReferences>true</OptimizeReferences>
            <GenerateDebugInformation>true</GenerateDebugInformation>
            <AdditionalLibraryDirectories>$(SolutionDir)Code/;$(SolutionDir)../Engine/Code/</AdditionalLibraryDirectories>
            <!-- Additional V8 dependencies not covered by props -->
            <AdditionalDependencies>winmm.lib;%(AdditionalDependencies)</AdditionalDependencies>
        </Link>
        <PostBuildEvent>
            <Command>xcopy /Y /F /I "$(TargetPath)" "$(SolutionDir)Run"</Command>
            <Message>Copying $(TargetFileName) to $(SolutionDir)Run...</Message>
        </PostBuildEvent>
    </ItemDefinitionGroup>

    <!-- Debug x64 Configuration -->
    <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
        <ClCompile>
            <WarningLevel>Level4</WarningLevel>
            <SDLCheck>true</SDLCheck>
            <PreprocessorDefinitions>_DEBUG;_CONSOLE;%(PreprocessorDefinitions)</PreprocessorDefinitions>
            <ConformanceMode>true</ConformanceMode>
            <LanguageStandard>stdcpp20</LanguageStandard>
            <AdditionalOptions>/Zc:__cplusplus /std:c++20</AdditionalOptions>
            <AdditionalIncludeDirectories>$(SolutionDir)Code/;$(SolutionDir)../Engine/Code/</AdditionalIncludeDirectories>
        </ClCompile>
        <Link>
            <SubSystem>Windows</SubSystem>
            <GenerateDebugInformation>true</GenerateDebugInformation>
            <AdditionalLibraryDirectories>$(SolutionDir)Code/;$(SolutionDir)../Engine/Code/;$(SolutionDir)../Engine/Code/ThirdParty/packages/v8-v143-x64.13.0.245.25/lib/Debug/</AdditionalLibraryDirectories>
            <!-- Additional V8 dependencies not covered by props -->
            <AdditionalDependencies>winmm.lib;v8.dll.lib;v8_libbase.dll.lib;v8_libplatform.dll.lib;dbghelp.lib;shlwapi.lib;%(AdditionalDependencies)</AdditionalDependencies>
        </Link>
        <PostBuildEvent>
            <Command>xcopy /Y /F /I "$(TargetPath)" "$(SolutionDir)Run" &amp; xcopy /Y /F "$(SolutionDir)../Engine/Code/ThirdParty/packages/v8.redist-v143-x64.13.0.245.25/lib/Debug/*.dll" "$(SolutionDir)Run\"</Command>
            <Message>Copying $(TargetFileName) and V8 Debug DLLs to $(SolutionDir)Run...</Message>
        </PostBuildEvent>
    </ItemDefinitionGroup>

    <!-- Release x64 Configuration -->
    <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Release|x64'">
        <ClCompile>
            <WarningLevel>Level4</WarningLevel>
            <FunctionLevelLinking>true</FunctionLevelLinking>
            <IntrinsicFunctions>true</IntrinsicFunctions>
            <SDLCheck>true</SDLCheck>
            <PreprocessorDefinitions>NDEBUG;_CONSOLE;%(PreprocessorDefinitions)</PreprocessorDefinitions>
            <ConformanceMode>true</ConformanceMode>
            <LanguageStandard>stdcpp20</LanguageStandard>
            <AdditionalOptions>/Zc:__cplusplus /std:c++20</AdditionalOptions>
            <AdditionalIncludeDirectories>$(SolutionDir)Code/;$(SolutionDir)../Engine/Code/</AdditionalIncludeDirectories>
        </ClCompile>
        <Link>
            <SubSystem>Windows</SubSystem>
            <EnableCOMDATFolding>true</EnableCOMDATFolding>
            <OptimizeReferences>true</OptimizeReferences>
            <GenerateDebugInformation>true</GenerateDebugInformation>
            <AdditionalLibraryDirectories>$(SolutionDir)Code/;$(SolutionDir)../Engine/Code/;$(SolutionDir)../Engine/Code/ThirdParty/packages/v8-v143-x64.13.0.245.25/lib/Release/</AdditionalLibraryDirectories>
            <!-- Additional V8 dependencies not covered by props -->
            <AdditionalDependencies>winmm.lib;v8.dll.lib;v8_libbase.dll.lib;v8_libplatform.dll.lib;dbghelp.lib;shlwapi.lib;%(AdditionalDependencies)</AdditionalDependencies>
        </Link>
        <PostBuildEvent>
            <Command>xcopy /Y /F /I "$(TargetPath)" "$(SolutionDir)Run" &amp; xcopy /Y /F "$(SolutionDir)../Engine/Code/ThirdParty/packages/v8.redist-v143-x64.13.0.245.25/lib/Release/*.dll" "$(SolutionDir)Run\"</Command>
            <Message>Copying $(TargetFileName) and V8 Release DLLs to $(SolutionDir)Run...</Message>
        </PostBuildEvent>
    </ItemDefinitionGroup>

    <!-- Project References -->
    <ItemGroup>
        <ProjectReference Include="..\..\..\Engine\Code\Engine\Engine.vcxproj">
            <Project>{d80656f3-b024-489f-b7b3-8bf35b25c423}</Project>
            <ReferenceOutputAssembly>false</ReferenceOutputAssembly>
        </ProjectReference>
    </ItemGroup>

    <!-- Modern Package References (Alternative to packages.config) -->
    <ItemGroup>
        <PackageReference Include="v8-v143-x64" Version="13.0.245.25">
            <PrivateAssets>all</PrivateAssets>
        </PackageReference>
        <PackageReference Include="v8.redist-v143-x64" Version="13.0.245.25">
            <PrivateAssets>all</PrivateAssets>
        </PackageReference>
    </ItemGroup>

    <!-- Source Files -->
    <ItemGroup>
        <ClCompile Include="Definition\BlockDefinition.cpp"/>
        <ClCompile Include="Framework\App.cpp"/>
        <ClCompile Include="Framework\Block.cpp"/>
        <ClCompile Include="Framework\Chunk.cpp"/>
        <ClCompile Include="Framework\GameCommon.cpp"/>
        <ClCompile Include="Framework\Main_Windows.cpp"/>
        <ClCompile Include="Gameplay\Entity.cpp"/>
        <ClCompile Include="Gameplay\Game.cpp"/>
        <ClCompile Include="Gameplay\Player.cpp"/>
        <ClCompile Include="Gameplay\Prop.cpp"/>
        <ClCompile Include="Gameplay\World.cpp"/>
        <ClCompile Include="Subsystem\Light\LightSubsystem.cpp"/>
    </ItemGroup>

    <!-- Header Files -->
    <ItemGroup>
        <ClInclude Include="Definition\BlockDefinition.hpp"/>
        <ClInclude Include="EngineBuildPreferences.hpp"/>
        <ClInclude Include="Framework\App.hpp"/>
        <ClInclude Include="Framework\Block.hpp"/>
        <ClInclude Include="Framework\Chunk.hpp"/>
        <ClInclude Include="Framework\GameCommon.hpp"/>
        <ClInclude Include="Gameplay\Entity.hpp"/>
        <ClInclude Include="Gameplay\Game.hpp"/>
        <ClInclude Include="Gameplay\Player.hpp"/>
        <ClInclude Include="Gameplay\Prop.hpp"/>
        <ClInclude Include="Gameplay\World.hpp"/>
        <ClInclude Include="Subsystem\Light\LightSubsystem.hpp"/>
    </ItemGroup>

    <!-- Other Files -->
    <ItemGroup>
        <None Include="..\..\Docs\README.md"/>
    </ItemGroup>

    <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets"/>
    <ImportGroup Label="ExtensionTargets">
    </ImportGroup>
</Project>