{
  "id": "snapshot_1764279089300_l62wribwq",
  "approvalId": "approval_1764012950777_y5ny2kv4h",
  "approvalTitle": "Review Steering Document: structure.md",
  "version": 1,
  "timestamp": "2025-11-27T21:31:29.300Z",
  "trigger": "revision_requested",
  "status": "pending",
  "content": "# Assignment 7: Project Structure\r\n\r\n## Directory Organization\r\n\r\n```\r\nSimpleMiner/\r\nâ”œâ”€â”€ Code/\r\nâ”‚   â””â”€â”€ Game/\r\nâ”‚       â”œâ”€â”€ Main_Windows.cpp                    # Entry point, WinMain\r\nâ”‚       â”œâ”€â”€ Game.vcxproj                        # Visual Studio project\r\nâ”‚       â”‚\r\nâ”‚       â”œâ”€â”€ Framework/                          # Core game systems (A4-A6 primary location)\r\nâ”‚       â”‚   â”œâ”€â”€ App.hpp/cpp                    # Game lifecycle, subsystem management\r\nâ”‚       â”‚   â”œâ”€â”€ Block.hpp/cpp                  # Ultra-lightweight 1-byte block (m_typeIndex only)\r\nâ”‚       â”‚   â”œâ”€â”€ Chunk.hpp/cpp                  # 16Ã—16Ã—128 block storage, mesh generation, terrain\r\nâ”‚       â”‚   â”œâ”€â”€ GameCommon.hpp/cpp             # Global constants, utility functions\r\nâ”‚       â”‚   â”œâ”€â”€ WorldGenConfig.hpp/cpp         # World generation parameter management\r\nâ”‚       â”‚   â””â”€â”€ CLAUDE.md                      # Module documentation\r\nâ”‚       â”‚\r\nâ”‚       â”œâ”€â”€ Gameplay/                          # Game-specific logic (A7 primary location)\r\nâ”‚       â”‚   â”œâ”€â”€ World.hpp/cpp                  # Chunk lifecycle, lighting, entity management\r\nâ”‚       â”‚   â”œâ”€â”€ Player.hpp/cpp                 # Player entity, camera, input\r\nâ”‚       â”‚   â”œâ”€â”€ Entity.hpp/cpp                 # Base class for dynamic objects (physics)\r\nâ”‚       â”‚   â”œâ”€â”€ Prop.hpp/cpp                   # Static props\r\nâ”‚       â”‚   â”œâ”€â”€ Game.hpp/cpp                   # High-level game state machine\r\nâ”‚       â”‚   â”‚\r\nâ”‚       â”‚   â”œâ”€â”€ [A7 NEW] AIAgent.hpp/cpp       # AI-controlled entity with command queue\r\nâ”‚       â”‚   â”œâ”€â”€ [A7 NEW] ItemEntity.hpp/cpp    # Dropped items in world (physics-enabled)\r\nâ”‚       â”‚   â”œâ”€â”€ [A7 NEW] Inventory.hpp/cpp     # 36-slot inventory container\r\nâ”‚       â”‚   â”œâ”€â”€ [A7 NEW] ItemStack.hpp/cpp     # Item quantity + type + durability\r\nâ”‚       â”‚   â””â”€â”€ CLAUDE.md                      # Module documentation\r\nâ”‚       â”‚\r\nâ”‚       â”œâ”€â”€ Definition/                        # Data-driven configuration (A7 heavy changes)\r\nâ”‚       â”‚   â”œâ”€â”€ BlockDefinition.hpp/cpp        # Block properties (migrating to JSON)\r\nâ”‚       â”‚   â”‚\r\nâ”‚       â”‚   â”œâ”€â”€ [A7 NEW] Registry.hpp          # Generic Registry<T> template\r\nâ”‚       â”‚   â”œâ”€â”€ [A7 NEW] ItemDefinition.hpp/cpp # Item properties (tools, resources)\r\nâ”‚       â”‚   â”œâ”€â”€ [A7 NEW] Recipe.hpp/cpp        # Crafting recipe definitions\r\nâ”‚       â”‚   â”œâ”€â”€ [A7 NEW] ToolDefinition.hpp/cpp # Tool effectiveness, durability\r\nâ”‚       â”‚   â””â”€â”€ CLAUDE.md                      # Module documentation\r\nâ”‚       â”‚\r\nâ”‚       â”œâ”€â”€ UI/                                # [A7 NEW] User interface widgets\r\nâ”‚       â”‚   â”œâ”€â”€ HotbarWidget.hpp/cpp           # Bottom-center hotbar (9 slots)\r\nâ”‚       â”‚   â”œâ”€â”€ CrosshairWidget.hpp/cpp        # Center-screen crosshair\r\nâ”‚       â”‚   â”œâ”€â”€ InventoryWidget.hpp/cpp        # Full inventory screen (36 slots + crafting)\r\nâ”‚       â”‚   â”œâ”€â”€ CraftingWidget.hpp/cpp         # 2Ã—2 crafting grid component\r\nâ”‚       â”‚   â”œâ”€â”€ DebugOverlayWidget.hpp/cpp     # F3 debug info (Minecraft style)\r\nâ”‚       â”‚   â”œâ”€â”€ MenuWidget.hpp/cpp             # Save/Load/Create game menu\r\nâ”‚       â”‚   â””â”€â”€ NameTagWidget.hpp/cpp          # Agent name tags (world-space UI)\r\nâ”‚       â”‚\r\nâ”‚       â”œâ”€â”€ KADI/                              # [A7 NEW] KADI integration layer\r\nâ”‚       â”‚   â”œâ”€â”€ KADIToolHandler.hpp/cpp        # MCP tool registration & callbacks\r\nâ”‚       â”‚   â”œâ”€â”€ AgentCommandExecutor.hpp/cpp   # Command execution logic (MOVE, MINE, etc.)\r\nâ”‚       â”‚   â””â”€â”€ AgentVisionSystem.hpp/cpp      # Nearby block/entity queries\r\nâ”‚       â”‚\r\nâ”‚       â””â”€â”€ CLAUDE.md                          # Game module overview\r\nâ”‚\r\nâ”œâ”€â”€ Run/                                       # Runtime assets and executables\r\nâ”‚   â”œâ”€â”€ SimpleMiner_x64.exe                   # Compiled executable (Debug/Release)\r\nâ”‚   â”‚\r\nâ”‚   â”œâ”€â”€ Data/\r\nâ”‚   â”‚   â”œâ”€â”€ Definitions/                      # [A7 MIGRATION] XML â†’ JSON\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ BlockDefinitions.json         # [A7 NEW] Replaces .xml\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ ItemDefinitions.json          # [A7 NEW]\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ Recipes.json                  # [A7 NEW]\r\nâ”‚   â”‚   â”‚   â””â”€â”€ GameConfig.xml                # [LEGACY] Will migrate post-A7\r\nâ”‚   â”‚   â”‚\r\nâ”‚   â”‚   â”œâ”€â”€ Shaders/                          # HLSL compiled shaders\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ World.hlsl                    # Voxel lighting shader (A5)\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ Default.hlsl                  # Standard mesh rendering\r\nâ”‚   â”‚   â”‚   â””â”€â”€ UI.hlsl                       # [A7 NEW] Widget rendering shader\r\nâ”‚   â”‚   â”‚\r\nâ”‚   â”‚   â”œâ”€â”€ Audio/                            # [A7 NEW] Sound effects\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ Mining/\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stone_dig.wav\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stone_break.wav\r\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dirt_dig.wav\r\nâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ wood_dig.wav\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ Placement/\r\nâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ block_place.wav\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ Crafting/\r\nâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ craft_success.wav\r\nâ”‚   â”‚   â”‚   â””â”€â”€ UI/\r\nâ”‚   â”‚   â”‚       â”œâ”€â”€ button_click.wav\r\nâ”‚   â”‚   â”‚       â””â”€â”€ inventory_open.wav\r\nâ”‚   â”‚   â”‚\r\nâ”‚   â”‚   â”œâ”€â”€ Images/                           # Textures and sprites\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ Terrain_8x8.png              # Block textures (existing)\r\nâ”‚   â”‚   â”‚   â”œâ”€â”€ Items_16x16.png              # [A7 NEW] Item sprite sheet\r\nâ”‚   â”‚   â”‚   â””â”€â”€ UI_Minecraft.png             # [A7 NEW] Minecraft UI sprites\r\nâ”‚   â”‚   â”‚\r\nâ”‚   â”‚   â””â”€â”€ Models/                           # 3D models (if any)\r\nâ”‚   â”‚\r\nâ”‚   â”œâ”€â”€ Saves/                                # [A7 NEW] World save files\r\nâ”‚   â”‚   â””â”€â”€ <WorldName>/\r\nâ”‚   â”‚       â”œâ”€â”€ chunks/                       # Chunk files (.chunk binary)\r\nâ”‚   â”‚       â””â”€â”€ player.json                   # [A7 NEW] Player state + inventory\r\nâ”‚   â”‚\r\nâ”‚   â””â”€â”€ CLAUDE.md                             # Runtime assets documentation\r\nâ”‚\r\nâ”œâ”€â”€ Docs/                                     # Development documentation\r\nâ”‚   â”œâ”€â”€ Henrik_Kniberg_Analysis.md           # Minecraft world generation research\r\nâ”‚   â”œâ”€â”€ WorldGenerationDevelopmentBlog/      # Professor's reference blog\r\nâ”‚   â””â”€â”€ CLAUDE.md\r\nâ”‚\r\nâ”œâ”€â”€ .claude/plan/                             # [LEGACY] Assignment 4 planning\r\nâ”‚   â”œâ”€â”€ development.md                        # A4 world generation plan\r\nâ”‚   â””â”€â”€ task-pointer.md                       # A4 task index\r\nâ”‚\r\nâ”œâ”€â”€ .spec-workflow/                           # Assignment workflow system\r\nâ”‚   â”œâ”€â”€ specs/\r\nâ”‚   â”‚   â””â”€â”€ A7/                              # [CURRENT ASSIGNMENT]\r\nâ”‚   â”‚       â”œâ”€â”€ requirements.md              # âœ… Approved v3\r\nâ”‚   â”‚       â”œâ”€â”€ product.md                   # âœ… Created (P-3)\r\nâ”‚   â”‚       â”œâ”€â”€ tech.md                      # âœ… Created (P-3)\r\nâ”‚   â”‚       â”œâ”€â”€ structure.md                 # ğŸ”„ Creating now (P-3)\r\nâ”‚   â”‚       â”œâ”€â”€ design.md                    # â³ Next (includes P-1 rendering bug fix)\r\nâ”‚   â”‚       â””â”€â”€ tasks.md                     # â³ After design approval\r\nâ”‚   â”‚\r\nâ”‚   â”œâ”€â”€ archive/specs/                        # Completed assignments\r\nâ”‚   â”‚   â”œâ”€â”€ A5/                              # Lighting system (archived)\r\nâ”‚   â”‚   â””â”€â”€ A6/                              # Physics & camera (archived)\r\nâ”‚   â”‚\r\nâ”‚   â””â”€â”€ templates/                            # Document templates\r\nâ”‚\r\nâ”œâ”€â”€ Engine/                                   # [GIT SUBMODULE] Shared engine code\r\nâ”‚   â””â”€â”€ Code/Engine/\r\nâ”‚       â”œâ”€â”€ Widget/                           # [A7 CRITICAL] UI rendering subsystem\r\nâ”‚       â”‚   â”œâ”€â”€ WidgetSubsystem.hpp/cpp      # Widget lifecycle management\r\nâ”‚       â”‚   â”œâ”€â”€ IWidget.hpp                  # Widget base interface\r\nâ”‚       â”‚   â””â”€â”€ CLAUDE.md                    # âœ… Created (P-2)\r\nâ”‚       â”‚\r\nâ”‚       â”œâ”€â”€ Network/                          # [A7 CRITICAL] KADI integration\r\nâ”‚       â”‚   â”œâ”€â”€ KADIWebSocketSubsystem.hpp/cpp # WebSocket KADI broker client\r\nâ”‚       â”‚   â”œâ”€â”€ IKADIProtocolAdapter.hpp     # KADI protocol abstraction\r\nâ”‚       â”‚   â”œâ”€â”€ KADIProtocolV1Adapter.hpp/cpp # Version 1 implementation\r\nâ”‚       â”‚   â””â”€â”€ CLAUDE.md                    # âœ… Updated (P-2)\r\nâ”‚       â”‚\r\nâ”‚       â”œâ”€â”€ Audio/                            # [A7 USED] FMOD-based sound\r\nâ”‚       â”‚   â”œâ”€â”€ AudioSystem.hpp/cpp          # Sound loading and playback\r\nâ”‚       â”‚   â””â”€â”€ CLAUDE.md                    # âœ… Updated (P-2)\r\nâ”‚       â”‚\r\nâ”‚       â”œâ”€â”€ ThirdParty/json/                 # [A7 CRITICAL] JSON parsing\r\nâ”‚       â”‚   â”œâ”€â”€ json.hpp                     # nlohmann/json library\r\nâ”‚       â”‚   â””â”€â”€ CLAUDE.md                    # âœ… Created (P-2)\r\nâ”‚       â”‚\r\nâ”‚       â””â”€â”€ [Other modules: Core, Math, Renderer, Input, Platform, etc.]\r\nâ”‚\r\nâ”œâ”€â”€ CLAUDE.md                                 # âœ… Updated (P-2) - Root project overview\r\nâ”œâ”€â”€ SimpleMiner.sln                           # Visual Studio solution\r\nâ””â”€â”€ .gitignore                                # Git exclusions\r\n```\r\n\r\n## Naming Conventions\r\n\r\n### Files\r\n\r\n#### C++ Source Files\r\n- **Classes**: `PascalCase.hpp` / `PascalCase.cpp` (e.g., `AIAgent.hpp`, `ItemStack.cpp`)\r\n- **Modules**: `PascalCase.hpp` / `PascalCase.cpp` (e.g., `GameCommon.hpp`)\r\n- **Documentation**: `CLAUDE.md` (all caps, per module directory)\r\n\r\n#### Data Files (Assignment 7)\r\n- **JSON Definitions**: `PascalCase.json` (e.g., `BlockDefinitions.json`, `Recipes.json`)\r\n- **Shaders**: `PascalCase.hlsl` (e.g., `World.hlsl`, `UI.hlsl`)\r\n- **Audio**: `snake_case.wav` (e.g., `stone_dig.wav`, `button_click.wav`)\r\n- **Textures**: `PascalCase_dimension.png` (e.g., `Terrain_8x8.png`, `Items_16x16.png`)\r\n\r\n#### Save Files (Assignment 7)\r\n- **Chunks**: `chunk_<x>_<y>.chunk` (binary format)\r\n- **Player State**: `player.json` (JSON format)\r\n- **World Metadata**: `world.json` (seed, creation date, etc.)\r\n\r\n### Code\r\n\r\n#### Classes/Types (C++)\r\n- **Classes**: `PascalCase` (e.g., `AIAgent`, `ItemStack`, `Registry<T>`)\r\n- **Structs**: `s` prefix + `PascalCase` (e.g., `sBlockDefinition`, `sItemDefinition`)\r\n- **Enums**: `ePascalCase` (e.g., `eItemType`, `eConnectionState`)\r\n- **Typedefs**: `PascalCase` (e.g., `WidgetPtr`, `SoundID`)\r\n\r\n#### Functions/Methods\r\n- **Public Methods**: `PascalCase` (e.g., `GetNearbyBlocks()`, `QueueCommand()`)\r\n- **Private/Protected**: `PascalCase` (same as public, no prefix distinction)\r\n- **Static Functions**: `PascalCase` (e.g., `BlockRegistry::Get()`)\r\n\r\n#### Variables\r\n- **Member Variables**: `m_` prefix + `camelCase` (e.g., `m_itemID`, `m_commandQueue`)\r\n- **Local Variables**: `camelCase` (e.g., `itemStack`, `blockDef`)\r\n- **Function Parameters**: `camelCase` (e.g., `agentID`, `recipeID`)\r\n- **Global Constants**: `UPPER_SNAKE_CASE` (e.g., `MAX_STACK_SIZE`, `CHUNK_SIZE_X`)\r\n\r\n#### Constants (GameCommon.hpp)\r\n- **World Dimensions**: `CHUNK_SIZE_X`, `CHUNK_SIZE_Y`, `CHUNK_SIZE_Z` (16, 16, 128)\r\n- **Gameplay**: `DEFAULT_TERRAIN_HEIGHT` (70), `MAX_AGENTS` (10)\r\n- **Inventory**: `INVENTORY_SIZE` (36), `HOTBAR_SIZE` (9)\r\n\r\n## Import Patterns\r\n\r\n### Include Order (C++ Files)\r\n```cpp\r\n// 1. Corresponding header (for .cpp files)\r\n#include \"Game/Gameplay/AIAgent.hpp\"\r\n\r\n// 2. Engine headers (external to Game module)\r\n#include \"Engine/Core/StringUtils.hpp\"\r\n#include \"Engine/Math/Vec3.hpp\"\r\n#include \"Engine/Network/KADIWebSocketSubsystem.hpp\"\r\n\r\n// 3. Game module headers (internal)\r\n#include \"Game/Framework/GameCommon.hpp\"\r\n#include \"Game/Gameplay/World.hpp\"\r\n#include \"Game/Definition/ItemDefinition.hpp\"\r\n\r\n// 4. Third-party headers\r\n#include \"ThirdParty/json/json.hpp\"\r\n\r\n// 5. Standard library\r\n#include <vector>\r\n#include <string>\r\n#include <memory>\r\n```\r\n\r\n### Forward Declarations (Headers)\r\n- Use forward declarations to minimize #include dependencies in .hpp files\r\n- Only #include when inheritance, composition, or template instantiation required\r\n\r\n```cpp\r\n// Forward declarations (in .hpp)\r\nclass World;\r\nclass ItemDefinition;\r\nclass KADIWebSocketSubsystem;\r\n\r\n// Full includes (in .cpp)\r\n#include \"Game/Gameplay/World.hpp\"\r\n#include \"Game/Definition/ItemDefinition.hpp\"\r\n```\r\n\r\n### Absolute Paths\r\n- All includes use absolute paths from project root\r\n- **Game includes**: `#include \"Game/...\"`\r\n- **Engine includes**: `#include \"Engine/...\"`\r\n- **No relative includes**: Avoid `#include \"../Framework/GameCommon.hpp\"`\r\n\r\n## Code Structure Patterns\r\n\r\n### Class Organization (Standard Pattern)\r\n\r\n```cpp\r\n//----------------------------------------------------------------------------------------------------\r\n// AIAgent.hpp\r\n//----------------------------------------------------------------------------------------------------\r\n#pragma once\r\n\r\n#include \"Game/Gameplay/Entity.hpp\"\r\n#include \"ThirdParty/json/json.hpp\"\r\n#include <queue>\r\n#include <string>\r\n\r\n//----------------------------------------------------------------------------------------------------\r\n// Forward Declarations\r\n//----------------------------------------------------------------------------------------------------\r\nclass World;\r\nclass Inventory;\r\nstruct AgentCommand;\r\n\r\n//----------------------------------------------------------------------------------------------------\r\n// AIAgent - Autonomous agent entity controlled via KADI commands\r\n//----------------------------------------------------------------------------------------------------\r\nclass AIAgent : public Entity\r\n{\r\npublic:\r\n    // Construction/Destruction\r\n    AIAgent(Vec3 const& position, std::string const& name);\r\n    ~AIAgent();\r\n\r\n    // Entity Interface (override)\r\n    void Update(float deltaSeconds) override;\r\n    void Render() const override;\r\n\r\n    // Command Queue\r\n    void QueueCommand(AgentCommand const& command);\r\n    bool HasPendingCommands() const;\r\n\r\n    // Vision System\r\n    std::vector<BlockInfo> GetNearbyBlocks(float radius) const;\r\n\r\n    // Accessors\r\n    std::string const& GetAgentName() const { return m_agentName; }\r\n    uint64_t GetAgentID() const { return m_agentID; }\r\n    Inventory* GetInventory() { return m_inventory; }\r\n\r\nprivate:\r\n    // Command Execution\r\n    void ProcessNextCommand(float deltaSeconds);\r\n    void ExecuteMoveCommand(AgentCommand const& cmd);\r\n    void ExecuteMineCommand(AgentCommand const& cmd);\r\n\r\n    // Member Variables\r\n    std::string              m_agentName;\r\n    uint64_t                 m_agentID;\r\n    std::queue<AgentCommand> m_commandQueue;\r\n    Inventory*               m_inventory = nullptr;\r\n    float                    m_visionRange = 10.0f;\r\n};\r\n```\r\n\r\n### Function Organization Principles\r\n1. **Public interface first**: Most commonly used functions at top\r\n2. **Lifecycle methods**: Constructor, destructor, Update(), Render()\r\n3. **Accessors/Mutators**: Getters and setters grouped together\r\n4. **Private helpers**: Implementation details at bottom\r\n5. **Member variables last**: Clear separation from methods\r\n\r\n## Code Organization Principles\r\n\r\n### 1. Single Responsibility Principle (SOLID)\r\n- Each class/file has one clear purpose\r\n- **Example**: `ItemStack` only manages item quantity/type, doesn't handle rendering\r\n- **Counter-Example**: Don't put inventory logic in `Player` class, use separate `Inventory` class\r\n\r\n### 2. Dependency Injection Over Singletons\r\n- Pass dependencies via constructor or method parameters\r\n- **Example**: `AIAgent(World* world, KADIWebSocketSubsystem* kadi)`\r\n- **Avoid**: Global `g_theWorld`, `g_theKADI` singletons (exception: `g_theApp` for legacy reasons)\r\n\r\n### 3. Composition Over Inheritance\r\n- **Example**: `Player` *has-a* `Inventory`, not *is-a* `InventoryOwner` base class\r\n- Entity is acceptable base class (provides physics, rendering common to all dynamic objects)\r\n\r\n### 4. Const Correctness\r\n- Methods that don't modify state should be `const`\r\n- Pass large objects by `const&` to avoid copies\r\n- Use `const` member variables for immutable properties\r\n\r\n## Module Boundaries\r\n\r\n### Engine â†’ Game Dependency (One-Way Only)\r\n- **RULE**: Game code can #include Engine headers, Engine code CANNOT #include Game headers\r\n- **Rationale**: Engine is a reusable library, Game is application-specific\r\n\r\n```cpp\r\n// âœ… ALLOWED: Game includes Engine\r\n#include \"Engine/Widget/WidgetSubsystem.hpp\"  // In Game/UI/HotbarWidget.cpp\r\n\r\n// âŒ FORBIDDEN: Engine includes Game\r\n#include \"Game/Gameplay/AIAgent.hpp\"          // In Engine/Network/KADIWebSocketSubsystem.cpp\r\n```\r\n\r\n### Framework vs Gameplay Separation\r\n- **Framework**: Core systems used by all games (Chunk, Block, App)\r\n- **Gameplay**: Game-specific logic (World, Player, AIAgent, Inventory)\r\n- **Definition**: Data-driven configuration (BlockDefinition, ItemDefinition, Recipe)\r\n- **UI**: User interface widgets (HotbarWidget, InventoryWidget)\r\n\r\n### Cross-Module Communication\r\n- **World â†’ Chunk**: Direct access (World owns chunks)\r\n- **Player â†’ World**: Through public World API (e.g., `World::GetBlock()`)\r\n- **AIAgent â†’ World**: Same as Player (consistent interface)\r\n- **Widget â†’ Game**: Via callbacks or polling (no direct Game manipulation from widgets)\r\n\r\n## Code Size Guidelines\r\n\r\n### File Size Limits\r\n- **Target**: 500-1000 lines per .cpp file\r\n- **Maximum**: 1500 lines (beyond this, consider splitting into multiple files)\r\n- **Exception**: `Chunk.cpp` currently ~3500 lines due to complex terrain generation (A4 legacy, will refactor post-A7)\r\n\r\n### Function/Method Size\r\n- **Target**: 10-30 lines per function\r\n- **Maximum**: 100 lines (beyond this, extract helper functions)\r\n- **Exception**: Large switch statements (e.g., command execution) acceptable if well-commented\r\n\r\n### Class Complexity\r\n- **Target**: 10-20 public methods per class\r\n- **Maximum**: 30 methods (beyond this, consider composition or strategy pattern)\r\n- **Nesting Depth**: Maximum 3 levels (if/for/while nesting)\r\n\r\n## Assignment 7 Specific Structure\r\n\r\n### New Files Created (A7)\r\n\r\n#### Gameplay Module\r\n- `AIAgent.hpp/cpp` (~300 lines) - AI-controlled entity\r\n- `ItemEntity.hpp/cpp` (~200 lines) - Dropped items with physics\r\n- `Inventory.hpp/cpp` (~250 lines) - 36-slot container\r\n- `ItemStack.hpp` (~50 lines) - Header-only struct\r\n\r\n#### Definition Module\r\n- `Registry.hpp` (~150 lines) - Template registry pattern (header-only)\r\n- `ItemDefinition.hpp/cpp` (~200 lines) - Item properties\r\n- `Recipe.hpp/cpp` (~150 lines) - Crafting recipes\r\n- `ToolDefinition.hpp` (~100 lines) - Tool properties (may merge with ItemDefinition)\r\n\r\n#### UI Module (New Directory)\r\n- `HotbarWidget.hpp/cpp` (~250 lines)\r\n- `InventoryWidget.hpp/cpp` (~400 lines) - Most complex UI\r\n- `CraftingWidget.hpp/cpp` (~200 lines)\r\n- `CrosshairWidget.hpp/cpp` (~50 lines)\r\n- `DebugOverlayWidget.hpp/cpp` (~150 lines)\r\n- `MenuWidget.hpp/cpp` (~300 lines)\r\n- `NameTagWidget.hpp/cpp` (~100 lines)\r\n\r\n#### KADI Module (New Directory)\r\n- `KADIToolHandler.hpp/cpp` (~300 lines) - MCP tool registration\r\n- `AgentCommandExecutor.hpp/cpp` (~250 lines) - Command execution logic\r\n- `AgentVisionSystem.hpp/cpp` (~150 lines) - Block/entity queries\r\n\r\n### Modified Files (A7)\r\n\r\n#### Framework Module\r\n- `Block.hpp/cpp` - Update `GetDefinition()` to use BlockRegistry instead of static vector\r\n- `GameCommon.hpp` - Add inventory/item/agent constants\r\n\r\n#### Gameplay Module\r\n- `World.hpp/cpp` - Add agent spawning, item entity management\r\n- `Player.hpp/cpp` - Add Inventory member, mining/placement logic\r\n- `Game.hpp/cpp` - Initialize KADI, registries, audio\r\n\r\n#### Definition Module\r\n- `BlockDefinition.hpp/cpp` - Migrate from XML to JSON, integrate with Registry<T>\r\n\r\n### JSON Data Files (A7)\r\n- `BlockDefinitions.json` (~200 lines) - Migrate from .xml\r\n- `ItemDefinitions.json` (~300 lines) - New\r\n- `Recipes.json` (~150 lines) - 10 recipes\r\n\r\n## Documentation Standards\r\n\r\n### CLAUDE.md Files\r\n- **Purpose**: Per-module AI context documentation\r\n- **Location**: Root of each module directory\r\n- **Contents**: Module responsibilities, entry points, external interfaces, key dependencies, data models, testing, FAQ, changelog\r\n- **Update**: Keep in sync with code changes (P-2 prerequisite for A7)\r\n\r\n### Code Comments\r\n- **Public APIs**: Doxygen-style comments (///-style or //-----------------------------------------------------------------------------------------------------)\r\n- **Complex Logic**: Inline comments explaining \"why\", not \"what\"\r\n- **TODOs**: `// TODO(username): Description of future work`\r\n- **Hacks**: `// HACK: Explanation of workaround` (mark technical debt)\r\n\r\n### Inline Documentation Example\r\n```cpp\r\n//----------------------------------------------------------------------------------------------------\r\n// QueueCommand - Add command to agent's execution queue\r\n//\r\n// Commands are executed sequentially (FIFO order). If the queue is full, the oldest\r\n// command is dropped (tail-drop policy). This prevents agent freeze when commands\r\n// accumulate faster than execution.\r\n//\r\n// Thread-Safety: This method is NOT thread-safe. Only call from main thread.\r\n//----------------------------------------------------------------------------------------------------\r\nvoid AIAgent::QueueCommand(AgentCommand const& command)\r\n{\r\n    if (m_commandQueue.size() >= MAX_COMMAND_QUEUE_SIZE)\r\n    {\r\n        m_commandQueue.pop();  // Drop oldest command\r\n    }\r\n\r\n    m_commandQueue.push(command);\r\n}\r\n```\r\n\r\n---\r\n\r\n**Document Version:** 1.0\r\n**Created:** 2025-11-24\r\n**Assignment:** A7 - Registry, Inventory, UI, AI Agents\r\n**Due Date:** December 12, 2025\r\n",
  "fileStats": {
    "size": 22166,
    "lines": 470,
    "lastModified": "2025-11-24T12:32:34.270Z"
  },
  "comments": []
}